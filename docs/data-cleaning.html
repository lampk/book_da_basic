<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chương 2 Kiểm tra và làm sạch dữ liệu | Phân tích số liệu cơ bản</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chương 2 Kiểm tra và làm sạch dữ liệu | Phân tích số liệu cơ bản" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="orientrcu/book_da_basic" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chương 2 Kiểm tra và làm sạch dữ liệu | Phân tích số liệu cơ bản" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Phùng Khánh Lâm, Ong Phúc Thịnh" />


<meta name="date" content="2019-07-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html">
<link rel="next" href="chun-bi-d-liu-cho-phan-tich.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Phân tích dữ liệu cơ bản</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Lời nói đầu</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#ni-dung-d-kin"><i class="fa fa-check"></i><b>0.1</b> Nội dung dự kiến</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#d-liu-s-dung-trong-sach"><i class="fa fa-check"></i><b>0.2</b> Dữ liệu sử dụng trong sách</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Giới thiệu về phân tích dữ liệu</a></li>
<li class="chapter" data-level="2" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>2</b> Kiểm tra và làm sạch dữ liệu</a><ul>
<li class="chapter" data-level="2.1" data-path="data-cleaning.html"><a href="data-cleaning.html#error"><i class="fa fa-check"></i><b>2.1</b> Các nhóm lỗi dữ liệu thường gặp</a></li>
<li class="chapter" data-level="2.2" data-path="data-cleaning.html"><a href="data-cleaning.html#detectmethod"><i class="fa fa-check"></i><b>2.2</b> Phương pháp phát hiện lỗi</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-cleaning.html"><a href="data-cleaning.html#d-liu-bi-thiumt"><i class="fa fa-check"></i><b>2.2.1</b> Dữ liệu bị thiếu/mất</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-cleaning.html"><a href="data-cleaning.html#d-liu-bi-lp-lai"><i class="fa fa-check"></i><b>2.2.2</b> Dữ liệu bị lặp lại</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-cleaning.html"><a href="data-cleaning.html#gia-tri-khong-hp-ly"><i class="fa fa-check"></i><b>2.2.3</b> Giá trị không hợp lý</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-cleaning.html"><a href="data-cleaning.html#khong-tuong-hp-gia-cac-bin-s"><i class="fa fa-check"></i><b>2.2.4</b> Không tương hợp giữa các biến số</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-cleaning.html"><a href="data-cleaning.html#quy-trinh-kim-tra-va-lam-sach-d-liu"><i class="fa fa-check"></i><b>2.3</b> Quy trình kiểm tra và làm sạch dữ liệu</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#tim-li"><i class="fa fa-check"></i><b>2.3.1</b> Tìm lỗi</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#chn-oan-li"><i class="fa fa-check"></i><b>2.3.2</b> Chẩn đoán lỗi</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-cleaning.html"><a href="data-cleaning.html#sa-li-lam-sach-d-liu"><i class="fa fa-check"></i><b>2.3.3</b> Sửa lỗi (làm sạch dữ liệu)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chun-bi-d-liu-cho-phan-tich.html"><a href="chun-bi-d-liu-cho-phan-tich.html"><i class="fa fa-check"></i><b>3</b> Chuẩn bị dữ liệu cho phân tích</a><ul>
<li class="chapter" data-level="3.1" data-path="chun-bi-d-liu-cho-phan-tich.html"><a href="chun-bi-d-liu-cho-phan-tich.html#tao-them-bin-s-mi"><i class="fa fa-check"></i><b>3.1</b> Tạo thêm biến số mới</a></li>
<li class="chapter" data-level="3.2" data-path="chun-bi-d-liu-cho-phan-tich.html"><a href="chun-bi-d-liu-cho-phan-tich.html#inh-dang-bin-s"><i class="fa fa-check"></i><b>3.2</b> Định dạng biến số</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chuyn-dang-d-liu-cho-phu-hp-vi-phan-tich.html"><a href="chuyn-dang-d-liu-cho-phu-hp-vi-phan-tich.html"><i class="fa fa-check"></i><b>4</b> Chuyển dạng dữ liệu cho phù hợp với phân tích</a><ul>
<li class="chapter" data-level="4.1" data-path="chuyn-dang-d-liu-cho-phu-hp-vi-phan-tich.html"><a href="chuyn-dang-d-liu-cho-phu-hp-vi-phan-tich.html#kt-hp-cac-bang-d-liu-vi-nhau"><i class="fa fa-check"></i><b>4.1</b> Kết hợp các bảng dữ liệu với nhau</a></li>
<li class="chapter" data-level="4.2" data-path="chuyn-dang-d-liu-cho-phu-hp-vi-phan-tich.html"><a href="chuyn-dang-d-liu-cho-phu-hp-vi-phan-tich.html#d-liu-dang-dai-hay-dang-rng"><i class="fa fa-check"></i><b>4.2</b> Dữ liệu dạng dài hay dạng rộng</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="phan-tich-mo-ta.html"><a href="phan-tich-mo-ta.html"><i class="fa fa-check"></i><b>5</b> Phân tích mô tả</a></li>
<li class="chapter" data-level="6" data-path="kim-inh-gia-thuyt-thng-ke.html"><a href="kim-inh-gia-thuyt-thng-ke.html"><i class="fa fa-check"></i><b>6</b> Kiểm định giả thuyết thống kê</a><ul>
<li class="chapter" data-level="6.1" data-path="kim-inh-gia-thuyt-thng-ke.html"><a href="kim-inh-gia-thuyt-thng-ke.html#ni-dung-d-kin-1"><i class="fa fa-check"></i><b>6.1</b> Nội dung dự kiến</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="mo-hinh-thng-ke.html"><a href="mo-hinh-thng-ke.html"><i class="fa fa-check"></i><b>7</b> Mô hình thống kê</a><ul>
<li class="chapter" data-level="7.1" data-path="mo-hinh-thng-ke.html"><a href="mo-hinh-thng-ke.html#ni-dung-d-kin-2"><i class="fa fa-check"></i><b>7.1</b> Nội dung dự kiến</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vit-bao-cao-phan-tich-phan-tich.html"><a href="vit-bao-cao-phan-tich-phan-tich.html"><i class="fa fa-check"></i><b>8</b> Viết báo cáo phân tích phân tích</a><ul>
<li class="chapter" data-level="8.1" data-path="vit-bao-cao-phan-tich-phan-tich.html"><a href="vit-bao-cao-phan-tich-phan-tich.html#ni-dung-d-kin-3"><i class="fa fa-check"></i><b>8.1</b> Nội dung dự kiến</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="oc-va-din-giai-kt-qua-phan-tich-lp-k-hoach-phan-tich.html"><a href="oc-va-din-giai-kt-qua-phan-tich-lp-k-hoach-phan-tich.html"><i class="fa fa-check"></i><b>9</b> Đọc và diễn giải kết quả phân tích, Lập kế hoạch phân tích</a><ul>
<li class="chapter" data-level="9.1" data-path="oc-va-din-giai-kt-qua-phan-tich-lp-k-hoach-phan-tich.html"><a href="oc-va-din-giai-kt-qua-phan-tich-lp-k-hoach-phan-tich.html#ni-dung-d-kin-4"><i class="fa fa-check"></i><b>9.1</b> Nội dung dự kiến</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="thu-thp-d-liu.html"><a href="thu-thp-d-liu.html"><i class="fa fa-check"></i><b>10</b> Thu thập dữ liệu</a><ul>
<li class="chapter" data-level="10.1" data-path="thu-thp-d-liu.html"><a href="thu-thp-d-liu.html#ni-dung-d-kin-5"><i class="fa fa-check"></i><b>10.1</b> Nội dung dự kiến</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tom-tt.html"><a href="tom-tt.html"><i class="fa fa-check"></i><b>11</b> Tóm tắt</a><ul>
<li class="chapter" data-level="11.1" data-path="tom-tt.html"><a href="tom-tt.html#ni-dung-d-kin-6"><i class="fa fa-check"></i><b>11.1</b> Nội dung dự kiến</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="Rcmdr.html"><a href="Rcmdr.html"><i class="fa fa-check"></i><b>12</b> Giới thiệu về R và R Commander</a></li>
<li class="chapter" data-level="" data-path="uc-tinh-c-mu.html"><a href="uc-tinh-c-mu.html"><i class="fa fa-check"></i>Ước tính cỡ mẫu</a></li>
<li class="chapter" data-level="" data-path="tai-liu-tham-khao.html"><a href="tai-liu-tham-khao.html"><i class="fa fa-check"></i>Tài liệu tham khảo</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Phân tích số liệu cơ bản</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data_cleaning" class="section level1">
<h1><span class="header-section-number">Chương 2</span> Kiểm tra và làm sạch dữ liệu</h1>
<p>Đây là bước đầu tiên nên được thực hiện khi nhận được một bộ số liệu, với mục tiêu là xây dựng được bộ số liệu sạch cho phân tích.</p>
<p>Sai sót hoặc dữ liệu bất thường rất thường gặp. Những sai sót này có thể bắt nguồn từ những sai sót trong quá trình thu thập dữ liệu và/hoặc quá trình nhập liệu. Một số lỗi có thể tình cờ phát hiện được trong khi phân tích, nhưng nhiều trường hợp không thể dễ dàng phát hiện và sẽ ảnh hưởng đến kết quả phân tích, thậm chí dẫn đến các sai sót trầm trọng. Vì vậy trước khi phân tích cần phải kiểm tra tính chính xác của số liệu để đảm bảo kết quả phân tích là chính xác nhất có thể.</p>
<table>
<caption><span id="tab:UncleanedDataset">Bảng 2.1: </span>Dữ liệu chưa được làm sạch</caption>
<thead>
<tr class="header">
<th align="left">id</th>
<th align="left">ngaysinh</th>
<th align="left">ngaync</th>
<th align="left">gioitinh</th>
<th align="right">hct0</th>
<th align="right">cannang_kg</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">001</td>
<td align="left">2013-05-08</td>
<td align="left">NA</td>
<td align="left">1</td>
<td align="right">49</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">002</td>
<td align="left">2018-12-03</td>
<td align="left">2018-02-03</td>
<td align="left">Nữ</td>
<td align="right">250</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">003</td>
<td align="left">2013-12-20</td>
<td align="left">2018-12-13</td>
<td align="left">Nam</td>
<td align="right">50</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">003</td>
<td align="left">2013-12-20</td>
<td align="left">2018-12-13</td>
<td align="left">Nam</td>
<td align="right">50</td>
<td align="right">20</td>
</tr>
</tbody>
</table>
<div id="error" class="section level2">
<h2><span class="header-section-number">2.1</span> Các nhóm lỗi dữ liệu thường gặp</h2>
<p>Rất nhiều lỗi khác nhau có thể gặp trong dữ liệu. Tuy nhiên, có thể tóm lại thành 4 nhóm lỗi thường gặp chính:</p>
<ul>
<li><p>Dữ liệu bị thiếu/mất (missing data): khi không có dữ liệu như mong đợi, có thể do trục trặc khi thu thập dữ liệu (đối tượng nghiên cứu bỏ nghiên cứu giữa chừng/không cung cấp thông tin, nghiên cứu viên quên thu thập thông tin) hoặc khi nhập liệu (nhập liệu sót, đặc biệt với phiếu thu thập thông tin dạng nhảy câu). Trong bộ dữ liệu, dữ liệu bị thiếu/mất thường được thể hiện bằng khoảng trắng (blank) hoặc giá trị NA (not available), ví dụ như ở biến số <strong>ngaync</strong> của đối tượng <strong>001</strong> trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>.</p></li>
<li><p>Dữ liệu bị lặp lại (duplicated data): khi dữ liệu từ một hay nhiều đối tượng bị lặp lại một hay nhiều lần, thường do sai sót trong quá trình nhập liệu. Trong bộ dữ liệu, dữ liệu bị lặp lại thể hiện bằng việc một hay nhiều hàng dữ liệu bị lặp lại. Ví dụ như trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>, dữ liệu của đối tượng <strong>003</strong> bị lặp lại thêm một lần.</p></li>
<li><p>Giá trị không hợp lý (out-of-range/inappropriate data): khi dữ liệu có giá trị nằm ngoài giới hạn thông thường (quá lớn hay quá bé, gặp ở các biến số liên tục) hoặc ngoài các giá trị cho phép (gặp ở các biến số phân nhóm) hoặc không phù hợp với thuộc tính của biến số (lẽ ra là giá trị số nhưng dữ liệu được nhập lại là chữ hoặc ngược lại). Đây có thể là lỗi trong quá trình thu thập dữ liệu hoặc khi nhập liệu. Ví dụ như trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>, dữ liệu về <strong>gioitinh</strong> của đối tượng <strong>001</strong> được ghi nhận là <strong>1</strong>, trong khi đây là biến số về giới tính, vốn chỉ có hai giá trị <strong>Nữ</strong> hoặc <strong>Nam</strong>.</p></li>
<li><p>Không tương hợp giữa các biến số (inconsistent data): khi dữ liệu có giá trị không phù hợp trong mối tương quan với các biến số khác trong bộ dữ liệu. Đây có thể là lỗi trong quá trình thu thập dữ liệu hoặc khi nhập liệu. Lỗi này khó phát hiện hơn so với các lỗi còn lại. Ví dụ như trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>, đối tượng <strong>002</strong> có <strong>ngaync</strong> (ngày vào nghiên cứu) là 2018-02-03 (ngày 03 tháng 02 năm 2018) trong khi <strong>ngaysinh</strong> (ngày sinh) lại là 2018-12-03 (ngày 03 tháng 12 năm 2018), nghĩa là đối tượng tham gia nghiên cứu trước khi sinh.</p></li>
</ul>
</div>
<div id="detectmethod" class="section level2">
<h2><span class="header-section-number">2.2</span> Phương pháp phát hiện lỗi</h2>
<p>Để phát hiện các lỗi đã nêu trên, chúng ta có thể sử dụng các công cụ của thống kê mô tả, qua các chỉ số thống kê mô tả và/hoặc các biểu đồ.</p>
<div id="d-liu-bi-thiumt" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Dữ liệu bị thiếu/mất</h3>
<p>Được phát hiện bằng cách mô tả số giá trị có trong bộ dữ liệu và so sánh với số giá trị mong đợi. Hiện nay, các phần mềm thống kê đều cho phép mô tả số giá trị bị thiếu/mất, nếu các giá trị này được mã hoá ở dạng mà các phần mềm thống kê hiểu (khoảng trắng, hoặc NA đối với R). Nếu trong giai đoạn nhập liệu, giá trị bị thiếu/mất được mã hoá theo cách khác (điền vào một giá trị nào đó, ví dụ 9, 99, 999) thì trước khi dùng phần mềm thống kê để mô tả dữ liệu, cần định dạng dữ liệu về dạng mà phần mềm thống kê hiểu.</p>
<p>Ở ví dụ về bộ dữ liệu trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>, bằng phần mềm R, chúng ta có thể dùng lệnh <code>summary()</code> để mô tả dữ liệu. Kết quả được trình bày dưới đây cho thấy có một giá trị bị thiếu/mất (NA) ở biến số <strong>ngaync</strong>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(dat)</code></pre>
<pre><code>##    id          ngaysinh        ngaync  gioitinh      hct0       
##  001:1   2013-05-08:1   2018-02-03:1   1  :1    Min.   : 49.00  
##  002:1   2013-12-20:2   2018-12-13:2   Nam:2    1st Qu.: 49.75  
##  003:2   2018-12-03:1   NA&#39;s      :1   Nữ :1    Median : 50.00  
##                                                 Mean   : 99.75  
##                                                 3rd Qu.:100.00  
##                                                 Max.   :250.00  
##    cannang_kg  
##  Min.   :10.0  
##  1st Qu.:17.5  
##  Median :20.0  
##  Mean   :25.0  
##  3rd Qu.:27.5  
##  Max.   :50.0</code></pre>
</div>
<div id="d-liu-bi-lp-lai" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Dữ liệu bị lặp lại</h3>
<p>Được phát hiện bằng cách mô tả số giá trị có trong bộ dữ liệu và so sánh với số giá trị mong đợi. Lỗi này cũng có thể phát hiện bằng mắt thường khi đã xếp dữ liệu theo thứ tự của mã số nghiên cứu, hoặc mô tả biến số mã số nghiên cứu (xem số giá trị mã số nghiên cứu khác nhau). Ngoài ra, một số phần mềm thống kê có thể có câu lệnh để kiểm tra dữ liệu bị lặp lại.</p>
<p>Ở ví dụ về bộ dữ liệu trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>, bằng phần mềm R, chúng ta có thể dùng các cách sau:</p>
<ul>
<li>Kiểm tra số hàng của bộ dữ liệu</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(dat)</code></pre>
<pre><code>## [1] 4</code></pre>
<p>Có 3 đối tượng nhưng bộ dữ liệu có 4 hàng.</p>
<ul>
<li>Mô tả biến số mã số nghiên cứu (ví dụ dùng lệnh <code>describe()</code> trong package Hmisc)</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">Hmisc<span class="op">::</span><span class="kw">describe</span>(dat<span class="op">$</span>id)</code></pre>
<pre><code>## dat$id 
##        n  missing distinct 
##        4        0        3 
##                          
## Value         1    2    3
## Frequency     1    1    2
## Proportion 0.25 0.25 0.50</code></pre>
<p>Biến số <strong>id</strong> (mã số nghiên cứu) có 4 giá trị, nhưng chỉ có 3 giá trị khác nhau (nghĩa là có một giá trị bị lặp lại).</p>
<ul>
<li>Kiểm tra số đối tượng nghiên cứu bằng cách kiểm tra số giá trị mã số nghiên cứu khác nhau</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(dat<span class="op">$</span>id)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">unique</span>(dat<span class="op">$</span>id))</code></pre>
<pre><code>## [1] 3</code></pre>
<p>Biến số <strong>id</strong> (mã số nghiên cứu) có 4 giá trị, nhưng chỉ có 3 giá trị khác nhau (nghĩa là có một giá trị bị lặp lại).</p>
<ul>
<li>Kiểm tra dữ liệu lặp lại bằng lệnh <code>anyDuplicated</code> hoặc <code>duplicated</code></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">anyDuplicated</span>(dat)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">duplicated</span>(dat)</code></pre>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<p>Dữ liệu ở hàng thứ 4 trong bộ dữ liệu <strong>dat</strong> là dữ liệu lặp lại.</p>
</div>
<div id="gia-tri-khong-hp-ly" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Giá trị không hợp lý</h3>
<p>Được phát hiện bằng cách mô tả tất cả các giá trị trong biến số bằng các chỉ số hoặc biểu đồ, từ đó tìm ra các giá trị khác biệt so với các giá trị còn lại của biến số.</p>
<p>Ở ví dụ về bộ dữ liệu trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>, bằng phần mềm R, chúng ta có thể dùng các cách sau:</p>
<ul>
<li>Mô tả các giá trị khác nhau của biến số bằng lệnh <code>unique()</code> hoặc <code>table()</code> (chỉ thích hợp với biến số có ít giá trị khác nhau, ví dụ biến số phân nhóm)</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(dat<span class="op">$</span>gioitinh)</code></pre>
<pre><code>## [1] 1   Nữ  Nam
## Levels: 1 Nam Nữ</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(dat<span class="op">$</span>gioitinh)</code></pre>
<pre><code>## 
##   1 Nam  Nữ 
##   1   2   1</code></pre>
<p>Biến số <strong>gioitinh</strong> (giới tính) có 3 giá trị: 1, Nữ, Nam; trong đó giá trị <strong>1</strong> không phù hợp.</p>
<ul>
<li>Mô tả khoảng giá trị, giá trị nhỏ nhất, giá trị lớn nhất để tìm các giá trị quá lớn hoặc quá bé so với mong đợi</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(dat<span class="op">$</span>hct0)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   49.00   49.75   50.00   99.75  100.00  250.00</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(dat<span class="op">$</span>hct0)</code></pre>
<pre><code>## [1]  49 250</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(dat<span class="op">$</span>hct0)</code></pre>
<pre><code>## [1] 49</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(dat<span class="op">$</span>hct0)</code></pre>
<pre><code>## [1] 250</code></pre>
<p>Biến số <strong>hct0</strong> (dung tích hồng cầu ở thời điểm lúc mới vào nghiên cứu) có khoảng giá trị từ 49% (giá trị nhỏ nhất) đến 250% (giá trị lớn nhất), trong đó giá trị <strong>250</strong> là không phù hợp với giá trị mong đợi của dung tích hồng cầu.</p>
<ul>
<li>Mô tả giá trị bằng biểu đồ cột (với biến số phân nhóm)</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>(<span class="kw">table</span>(dat<span class="op">$</span>gioitinh))</code></pre>
<p><img src="book_da_basic_files/figure-html/detectInappropriate3-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Biến số <strong>gioitinh</strong> có giá trị <strong>1</strong>, không phù hợp với các giá trị còn lại.</p>
<ul>
<li>Mô tả giá trị bằng histogram hoặc boxplot (với biến số liên tục)</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(dat<span class="op">$</span>hct0)</code></pre>
<p><img src="book_da_basic_files/figure-html/detectInappropriate4-1.png" width="80%" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(dat<span class="op">$</span>hct0)</code></pre>
<p><img src="book_da_basic_files/figure-html/detectInappropriate4-2.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Biến số <strong>hct0</strong> có giá trị <strong>250</strong>, rất khác biệt so với các giá trị còn lại và nằm ngoài khoảng giá trị mong đợi cho dung tích hồng cầu.</p>
</div>
<div id="khong-tuong-hp-gia-cac-bin-s" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Không tương hợp giữa các biến số</h3>
<p>Được phát hiện bằng cách mô tả biến số thứ cấp tạo ra từ các biến số liên quan, hoặc dùng biểu đồ mô tả mối liên hệ giữa hai biến số với nhau.</p>
<p>Ở ví dụ về bộ dữ liệu trong Bảng <a href="data-cleaning.html#tab:UncleanedDataset">2.1</a>, bằng phần mềm R, chúng ta có thể dùng các cách sau:</p>
<ul>
<li>Mô tả biến số thứ cấp: ví dụ mô tả biến số <strong>tuoi</strong> (tuổi lúc vào nghiên cứu), được tính từ biến số <strong>ngaysinh</strong> và <strong>ngaync</strong></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">dat<span class="op">$</span>tuoi &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">difftime</span>(<span class="kw">as.Date</span>(dat<span class="op">$</span>ngaync), <span class="kw">as.Date</span>(dat<span class="op">$</span>ngaysinh), <span class="dt">units =</span> <span class="st">&quot;days&quot;</span>))
<span class="kw">summary</span>(dat<span class="op">$</span>tuoi)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##    -303     758    1819    1112    1819    1819       1</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(dat<span class="op">$</span>tuoi)</code></pre>
<p><img src="book_da_basic_files/figure-html/detectInconsistency1-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Có một trường hợp <strong>tuoi</strong> (tuổi lúc vào nghiên cứu) &lt; 0.</p>
<ul>
<li>Dùng biểu đồ mô tả mối liên hệ giữa hai biến số <strong>ngaysinh</strong> và <strong>ngaync</strong></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## phân tán đồ (scatterplot) của ngaysinh và ngaync</span>
<span class="kw">plot</span>(<span class="dt">x =</span> <span class="kw">as.Date</span>(dat<span class="op">$</span>ngaysinh), <span class="dt">y =</span> <span class="kw">as.Date</span>(dat<span class="op">$</span>ngaync))
<span class="co">## đường thẳng qua các điểm ngaysinh bằng ngaync</span>
<span class="kw">abline</span>(<span class="dt">a =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">1</span>)</code></pre>
<p><img src="book_da_basic_files/figure-html/detectInconsistency2-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Có một trường hợp <strong>ngaync</strong> nhỏ hơn <strong>ngaysinh</strong> (nằm phía dưới đường thẳng đi qua các giá trị <strong>ngaync</strong> bằng <strong>ngaysinh</strong>) trong khi mong đợi <strong>ngaync</strong> phải lớn hơn <strong>ngaysinh</strong> (đối tượng phải được sinh ra trước khi vào nghiên cứu).</p>
</div>
</div>
<div id="quy-trinh-kim-tra-va-lam-sach-d-liu" class="section level2">
<h2><span class="header-section-number">2.3</span> Quy trình kiểm tra và làm sạch dữ liệu</h2>
<p>Để phát hiện và loại bỏ tối đa các sai sót có thể có nhằm có được bộ dữ liệu sạch và đáng tin cậy cho phân tích, chúng ta cần kiểm tra và làm sạch dữ liệu một cách có hệ thống theo 3 bước như sau:</p>
<div id="tim-li" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Tìm lỗi</h3>
<p>Dựa vào các phương pháp thống kê mô tả (sử dụng chỉ số và/hoặc biểu đồ, như đã trình bày ở mục <a href="data-cleaning.html#detectmethod">2.2</a>) để tìm các lỗi thường gặp (như đã trình bày ở mục <a href="data-cleaning.html#error">2.1</a>).</p>
<p>Các lỗi tìm thấy nên được tổng hợp lại trong một file dữ liệu trước khi tiến hành bước tiếp theo. File dữ liệu này nên bao gồm các thông tin sau:</p>
<ul>
<li>Lỗi tìm thấy là gì? (loại lỗi)</li>
<li>Lỗi ở đâu? (biến số liên quan, mã số nghiên cứu liên quan)</li>
</ul>
</div>
<div id="chn-oan-li" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Chẩn đoán lỗi</h3>
<p>Trong bước này, chúng ta sẽ dựa vào kiến thức chuyên môn và hiểu biết về nghiên cứu và quá trình thu thập dữ liệu - nhập liệu trong nghiên cứu để đánh giá xem các lỗi tìm thấy trong dữ liệu có thực sự là lỗi hay không. Khi đánh giá, cần đối chiếu với dữ liệu gốc (dữ liệu thu thập trên phiếu thu thập bằng giấy) nếu có. Sau khi đánh giá, các lỗi này có thể được phân loại thành:</p>
<ul>
<li>Lỗi thực sự</li>
<li>Không phải lỗi (chỉ là giá trị hiếm gặp)</li>
<li>Không chắc: không thể xác định có phải là lỗi không dựa vào các thông tin hiện có</li>
</ul>
</div>
<div id="sa-li-lam-sach-d-liu" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Sửa lỗi (làm sạch dữ liệu)</h3>
<p>Tùy theo phân loại ở bước chẩn đoán lỗi, chúng ta sẽ có cách sửa lỗi phù hợp:</p>
<ul>
<li>Lỗi thực sự: sửa lại thành giá trị đúng (nếu có cơ sở cho giá trị đúng, ví dụ như giá trị gốc được lưu trên giấy) hoặc xoá hẳn giá trị sai (nếu không thể xác định được giá trị đúng).</li>
<li>Không phải lỗi: giữ nguyên, không thay đổi giá trị trong dữ liệu.</li>
<li>Không chắc: cân nhắc giữa giữ nguyên và xoá hẳn giá trị này.</li>
</ul>
<p>Các bước trên và mọi thay đổi trong bộ dữ liệu nên được ghi nhận lại với các thông tin như:
* Lỗi tìm thấy là gì? (loại lỗi)
* Lỗi ở đâu? (biến số liên quan, mã số nghiên cứu liên quan)
* Chẩn đoán lỗi là gì?
* Người chẩn đoán lỗi?
* Quyết định đưa ra với lỗi?
* Người đưa ra quyết định?
* Nếu có sửa lỗi thì giá trị cũ là gì, giá trị mới là gì? người sửa lỗi? ngày sửa lỗi?</p>
<p>Vấn đề này đặc biệt quan trọng khi làm việc trong một nhóm và nhằm đảm bảo tính minh bạch và rõ ràng trong quản lý dữ liệu. Một ví dụ về file dữ liệu ghi nhận các bước liên quan đến việc kiểm tra và làm sạch dữ liệu như sau:</p>
<div class="figure" style="text-align: center"><span id="fig:documentclean"></span>
<img src="figures/02_04.png" alt="File ghi nhận việc kiểm tra và làm sạch dữ liệu" width="80%" />
<p class="caption">
Hình 2.1: File ghi nhận việc kiểm tra và làm sạch dữ liệu
</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chun-bi-d-liu-cho-phan-tich.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-data_cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["book_da_basic.pdf", "book_da_basic.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
